#!/bin/bash
# ==========================================================
# Script : backup_logs.sh
# Objectif : Sauvegarder les fichiers de /var/log/
# Auteur : SAINT-POL THOMAS
# Date : 30/10/2025
# ==========================================================

# Dossier de sauvegarde
SAUVEGARDE="$HOME/sauvegardes"
LOGFILE="$HOME/logs/backup.log"
DATE=$(date +%Y-%m-%d_%H-%M-%S)
FICHIER="logs_${DATE}.tar.gz"

# Création des dossiers si besoin
mkdir -p "$SAUVEGARDE"
mkdir -p "$HOME/logs"

# Sauvegarde avec tar
tar -czf "$SAUVEGARDE/$FICHIER" /var/log/ 2>/dev/null

# Vérification et écriture dans le log
if [ $? -eq 0 ]; then
    echo "[$DATE] Sauvegarde réussie : $SAUVEGARDE/$FICHIER" | tee -a "$LOGFILE"
else
    echo "[$DATE] Erreur lors de la sauvegarde !" | tee -a "$LOGFILE"
fi
